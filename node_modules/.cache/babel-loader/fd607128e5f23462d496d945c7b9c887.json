{"ast":null,"code":"import _classCallCheck from \"/mnt/01D41088BF52D360/Project/CNMReactJS/mychat/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/mnt/01D41088BF52D360/Project/CNMReactJS/mychat/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/mnt/01D41088BF52D360/Project/CNMReactJS/mychat/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/mnt/01D41088BF52D360/Project/CNMReactJS/mychat/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/mnt/01D41088BF52D360/Project/CNMReactJS/mychat/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _assertThisInitialized from \"/mnt/01D41088BF52D360/Project/CNMReactJS/mychat/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nvar _jsxFileName = \"/mnt/01D41088BF52D360/Project/CNMReactJS/mychat/src/components/home-page/component-in-home/MainContent.js\";\nimport React from 'react';\nimport lodash from 'lodash';\nimport SearchUser from '../../home-page/component-in-home/s';\nimport '../../styles/MainContent.css';\nimport { withRouter } from \"react-router-dom\";\nimport moment from 'moment';\n\nvar MainContent =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(MainContent, _React$Component);\n\n  function MainContent(props) {\n    var _this;\n\n    _classCallCheck(this, MainContent);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(MainContent).call(this, props));\n    _this.renderMessage = _this.renderMessage.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    _this.scrollMessageToBottom = _this.scrollMessageToBottom.bind(_assertThisInitialized(_assertThisInitialized(_this)));\n    return _this;\n  }\n\n  _createClass(MainContent, [{\n    key: \"renderMessage\",\n    value: function renderMessage(message) {\n      var tmp = message.body;\n      var html = lodash.split(tmp, '\\n').map(function (text, key) {\n        return React.createElement(\"div\", {\n          key: key,\n          dangerouslySetInnerHTML: {\n            __html: text\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 18\n          },\n          __self: this\n        });\n      });\n      return html;\n    }\n  }, {\n    key: \"scrollMessageToBottom\",\n    value: function scrollMessageToBottom() {\n      if (this.refMessage) {\n        this.refMessage.scrollTop = this.refMessage.scrollHeight;\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      this.scrollMessageToBottom();\n    }\n  }, {\n    key: \"onLogoutApp\",\n    value: function onLogoutApp() {\n      var store = this.props.store;\n      this.props.history.push('/');\n      store.logoutApp();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var store = this.props.store;\n      console.log(\"Main content\");\n      var isLogOut = store.getIsLogOut;\n      var size = store.messages.size;\n\n      if (isLogOut) {\n        this.onLogoutApp();\n      }\n\n      return lodash.get(store.getActiveChannel, 'isNew') || store.getShowComponentSearch ? React.createElement(SearchUser, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }) : React.createElement(\"div\", {\n        ref: function ref(refe) {\n          _this2.refMessage = refe;\n        },\n        className: \"messages\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, store.getMessagesFromChannel(store.getActiveChannel).map(function (message, index) {\n        var userId = lodash.get(message, 'userId');\n        var user = store.getUserInCache(userId);\n        return message.me ? React.createElement(\"div\", {\n          key: index,\n          className: \"message-me\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 57\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"message-body-me\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 58\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"message-text-me\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 59\n          },\n          __self: this\n        }, _this2.renderMessage(message)), React.createElement(\"div\", {\n          className: \"created-message\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 62\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63\n          },\n          __self: this\n        }, moment(message.created).format('MM/DD/YY, HH:mm')))), React.createElement(\"div\", {\n          className: \"message-user-image\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: lodash.get(user, 'avatar'),\n          alt: \"avatar\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 67\n          },\n          __self: this\n        }))) : React.createElement(\"div\", {\n          key: index,\n          className: \"message\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 71\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"message-user-image\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 72\n          },\n          __self: this\n        }, React.createElement(\"img\", {\n          src: lodash.get(user, 'avatar'),\n          alt: \"avatar\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 73\n          },\n          __self: this\n        })), React.createElement(\"div\", {\n          className: \"message-body\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 75\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          className: \"message-author\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 76\n          },\n          __self: this\n        }, lodash.get(user, 'name')), React.createElement(\"div\", {\n          className: \"message-text\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 79\n          },\n          __self: this\n        }, _this2.renderMessage(message)), React.createElement(\"div\", {\n          className: \"created-message\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 82\n          },\n          __self: this\n        }, React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83\n          },\n          __self: this\n        }, moment(message.created).format('MM/DD/YY, HH:mm')))));\n      }));\n    }\n  }]);\n\n  return MainContent;\n}(React.Component);\n\nexport default withRouter(MainContent);","map":{"version":3,"sources":["/mnt/01D41088BF52D360/Project/CNMReactJS/mychat/src/components/home-page/component-in-home/MainContent.js"],"names":["React","lodash","SearchUser","withRouter","moment","MainContent","props","renderMessage","bind","scrollMessageToBottom","message","tmp","body","html","split","map","text","key","__html","refMessage","scrollTop","scrollHeight","store","history","push","logoutApp","console","log","isLogOut","getIsLogOut","size","messages","onLogoutApp","get","getActiveChannel","getShowComponentSearch","refe","getMessagesFromChannel","index","userId","user","getUserInCache","me","created","format","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport lodash from 'lodash';\nimport SearchUser from '../../home-page/component-in-home/s';\nimport '../../styles/MainContent.css';\nimport {withRouter} from \"react-router-dom\";\nimport moment from 'moment';\n\nclass MainContent extends React.Component {\n    constructor(props) {\n        super(props);\n        this.renderMessage = this.renderMessage.bind(this);\n        this.scrollMessageToBottom = this.scrollMessageToBottom.bind(this);\n    }\n\n    renderMessage(message) {\n        const tmp = message.body;\n        const html = lodash.split(tmp, '\\n').map((text, key) => {\n            return <div key={key} dangerouslySetInnerHTML={{ __html: text }} />\n        })\n        return html;\n    }\n\n    scrollMessageToBottom() {\n        if (this.refMessage) {\n            this.refMessage.scrollTop = this.refMessage.scrollHeight;\n        }\n    }\n\n    componentDidUpdate() {\n        this.scrollMessageToBottom();\n    }\n\n    onLogoutApp(){\n        const { store } = this.props;\n        this.props.history.push('/');\n        store.logoutApp();\n    }\n\n    render() {\n        const { store } = this.props;\n        console.log(\"Main content\");\n        const isLogOut = store.getIsLogOut;\n        const size = store.messages.size;\n        if(isLogOut){\n            this.onLogoutApp();\n        }\n        return (\n            (lodash.get(store.getActiveChannel, 'isNew') || store.getShowComponentSearch) ?\n                <SearchUser></SearchUser>\n                :\n                <div ref={(refe) => { this.refMessage = refe }} className=\"messages\">\n                    {store.getMessagesFromChannel(store.getActiveChannel).map((message, index) => {\n                        const userId = lodash.get(message, 'userId');\n                        const user = store.getUserInCache(userId);\n                        return (\n                            (message.me ? \n                            <div key={index} className=\"message-me\">\n                                <div className=\"message-body-me\">\n                                    <div className='message-text-me'>\n                                        {this.renderMessage(message)}\n                                    </div>\n                                    <div className =\"created-message\">\n                                        <div>{moment(message.created).format('MM/DD/YY, HH:mm')}</div>\n                                    </div>\n                                </div>\n                                <div className=\"message-user-image\">\n                                    <img src={lodash.get(user, 'avatar')} alt=\"avatar\" />\n                                </div>\n                            </div>\n                            :\n                            <div key={index} className=\"message\">\n                                <div className=\"message-user-image\">\n                                    <img src={lodash.get(user, 'avatar')} alt=\"avatar\" />\n                                </div>\n                                <div className='message-body'>\n                                    <div className='message-author'>\n                                        {lodash.get(user,'name')}\n                                    </div>\n                                    <div className='message-text'>\n                                        {this.renderMessage(message)}\n                                    </div>\n                                    <div className =\"created-message\">\n                                        <div>{moment(message.created).format('MM/DD/YY, HH:mm')}</div>\n                                    </div>\n                                </div>\n                            </div>\n                            )\n                        );\n                    })}\n                </div>\n        )\n    }\n}\n\nexport default withRouter(MainContent);\n"]},"metadata":{},"sourceType":"module"}